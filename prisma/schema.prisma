generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model courses {
  code         Int     @id @default(autoincrement())
  name         String
  shift        String
  min_duration Decimal @db.Decimal
  max_duration Decimal @db.Decimal
  legal_base   String
  description  String
  ob_workload  Int
  op_workload  Int
  ac_workload  Int
}

model courses_disciplines {
  course_id     Int
  discipline_id String

  @@id([course_id, discipline_id])
}

model disciplines {
  code         String    @id @db.VarChar(8)
  name         String
  workload     Int
  department   String
  program      String
  objective    String
  content      String
  bibliography String
  id           BigInt    @default(autoincrement())
  created_at   DateTime? @db.Timestamptz(6)
  updated_at   DateTime? @db.Timestamptz(6)
  deleted_at   DateTime? @db.Timestamptz(6)

  @@index([deleted_at], map: "idx_disciplines_deleted_at")
}

model prerequisites {
  course_id     Int
  discipline_id String
  depends_on    String

  @@id([course_id, discipline_id, depends_on])
}

model users {
  id         String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  created_at DateTime? @default(now()) @db.Timestamptz(6)
  updated_at DateTime? @default(now()) @db.Timestamptz(6)
  deleted_at DateTime? @db.Timestamptz(6)
  name       String?
  email      String?   @unique(map: "idx_users_email")

  @@index([deleted_at], map: "idx_users_deleted_at")
}
